<html>
<head>
	<title>JAY's prototype</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-theme.min.css" rel="stylesheet">
	<link href="css/prototype.css" rel="stylesheet">
	<link href="css/addfood.css" rel="stylesheet">
	<!-- this is a comment in HTML -->
</head>


<body>
  <!--This is the fixed top-->
  <div class="navbar_top">
      <a href="#arrow">
    </a>
    <a href="#ourApp" style="font-size: 16pt;background: none;">add food</a>
    <a href="" id="profile_icon">
    </a>
  </div>
  <!--END-->

  <!--This is the fixed bottom-->
  <div class="navbar_bottom">
    <a href="homepage.html">
      <img src="images/home.png" height="40" alt="p">
    </a>
    <a href="cook1.html">
      <img src="images/cook.png" height="42" alt="p">
    </a>
    <a href="mykitchen.html">
      <img src="images/kitchen.png" height="38" alt="p">
    </a>
    <a href="addfood.html">
      <img src="images/add.png" height="37" alt="p">
    </a>
  </div>
  <!-- END -->

  <div class="main">
    <!--Recipe page title-->
		<div class="container" style="margin-top:30%">
			<h4>Type or scan the food you want to add here: </h4>
			</div>
		<div class="row">
			<div class="col-xs-1">
			</div>
			<div class="col-xs-1">
					<form action="/action_page.php" method="get">
						<p>
							Ingredient:&emsp; <input type="text" id="ing" name="fname"><br>
						</p>
						<p>
							Category:&emsp;&emsp;
							<select id="select">
							  <option value="Fruits">Fruits</option>
							  <option value="Protein">Protein</option>
							  <option value="Vegetables">Vegetables</option>
							  <option value="Diary">Diary</option>
								<option value="Others">Others</option>
							</select>
						</p>
					</form>
			</div>
			<div class="col-xs-1">
				<input type="file" class="hidden" accept="image/*" capture="camera" id="scanner" onchange="scan()">
				<label for="scanner" id="scanlabel"></label>
			</div>
			<div class="col-xs-1">
			</div>
		</div>
		<div class="row">
			<button style="margin-top:10px;" type="button" class="btn btn-block" onclick="addItem()">Add to my kitchen</button>
		</div>

  </div>

	<script>
		function addItem(){
			var catlg = document.getElementById('select').value;
			var ingredient = document.getElementById('ing').value;
			if(ingredient==''){
				alert("You add nothing! Please type your new ingredient");
				return;
			}
			var myKitchen = JSON.parse(localStorage.getItem('myKitchen'));
		  console.log(myKitchen);
			for(var i = 0; i < myKitchen.length; i++){
				if(catlg == myKitchen[i]['category']){
					if(myKitchen[i]['items'].indexOf(ingredient.toLowerCase()) > -1){
						alert("Already have this item in your kitchen!");
						document.getElementById('ing').value = '';
					}
					else{
						myKitchen[i]['items'].push(ingredient.toLowerCase());
						alert("Successfully added " + ingredient.toLowerCase()+"!");
						localStorage.setItem('myKitchen',JSON.stringify(myKitchen));
					}
				}
			}
		}

		function scan(){
			document.getElementById("ing").value = "water";
			alert("Successfully scanned water");
		}

	</script>

  <!-- include JavaScript near the end of the HTML file -->
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
</body>
</html>
